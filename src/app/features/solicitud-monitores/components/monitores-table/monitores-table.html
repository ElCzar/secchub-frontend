<div class="table-container">
  <table class="monitores-table">
    <thead>
      <tr>
        <th class="checkbox-column">
          <input type="checkbox" (change)="toggleSelectAll($event)" />
        </th>
        <th>ID del<br>estudiante</th>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Carrera</th>
        <th>Semestre</th>
        <th>Promedio<br>Acumulado</th>
        <th>Nombre del profesor<br>con quien tomó<br>la asignatura</th>
        <th>No.<br>Clase</th>
        <th>Nombre<br>Asignatura</th>
        <th>Nota<br>Obtenida</th>
        <th>Horas<br>Semanales</th>
        <th>Semanas</th>
        <th>Total<br>Horas</th>
        <th>Correo<br>Institucional</th>
        <th>ANTIGUO</th>
        <th>Monitor<br>Administrativo</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let m of monitores; let i = index">
        <tr class="monitor-row">
          <td class="checkbox-column">
            <input type="checkbox" [(ngModel)]="m.seleccionado" (change)="toggleSelection(m)" />
          </td>
          <td>{{ m.id }}</td>
          <td>{{ m.nombre }}</td>
          <td>{{ m.apellido }}</td>
          <td>{{ m.carrera }}</td>
          <td>{{ m.semestre }}</td>
          <td>{{ m.promedio }}</td>
          <td>{{ m.profesor }}</td>
          <td class="editable-cell">
            <input 
              type="number" 
              class="table-input" 
              [(ngModel)]="m.noClase" 
              placeholder=""
            />
          </td>
          <td>{{ m.asignatura }}</td>
          <td>{{ m.nota }}</td>
          <td class="editable-cell">
            <input 
              type="number" 
              class="table-input" 
              [(ngModel)]="m.horasSemanales" 
              (change)="calcularTotal(m)" 
              placeholder=""
            />
          </td>
          <td class="editable-cell">
            <input 
              type="number" 
              class="table-input" 
              [(ngModel)]="m.semanas" 
              (change)="calcularTotal(m)" 
              placeholder=""
            />
          </td>
          <td class="total-horas">{{ m.totalHoras }}</td>
          <td>{{ m.correo }}</td>
          <td>{{ m.antiguo ? 'Sí' : 'No' }}</td>
          <td>{{ m.administrativo ? 'Sí' : 'No' }}</td>
          <td class="actions-column">
            <app-monitor-row-actions
              (edit)="editMonitor(i)"
              (delete)="deleteMonitor(i)">
            </app-monitor-row-actions>
          </td>
        </tr>

        <!-- Expander para horarios -->
        <tr class="expander-row">
          <td colspan="18">
            <div class="expander-inner">
              <button class="expander" type="button" (click)="m.showHorarios = !m.showHorarios">
                <span class="caret" [class.open]="m.showHorarios">▸</span> Horarios
              </button>
            </div>
          </td>
        </tr>

        <!-- Bloque de horarios (solo si showHorarios) -->
        <tr *ngIf="m.showHorarios">
          <td colspan="18">
            <app-horarios-monitores [horarios]="m.horarios"></app-horarios-monitores>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
